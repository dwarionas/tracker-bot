# Telegram Bot - Protein Tracker

Telegram –±–æ—Ç –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –±—ñ–ª–∫–∞, –Ω–∞–ø–∏—Å–∞–Ω–∏–π –Ω–∞ TypeScript –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Grammy.

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

1. –û–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –Ω–∞ [Vercel](https://vercel.com)
2. Telegram Bot Token (–æ—Ç—Ä–∏–º–∞–π—Ç–µ –≤—ñ–¥ [@BotFather](https://t.me/BotFather))
3. Node.js 18+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏)

### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
npm install
```

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É:

```env
BOT_KEY=your_telegram_bot_token_here
```

### –ö—Ä–æ–∫ 3: –î–µ–ø–ª–æ–π –Ω–∞ Vercel

#### –í–∞—Ä—ñ–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Vercel CLI

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Vercel CLI:
```bash
npm i -g vercel
```

2. –£–≤—ñ–π–¥—ñ—Ç—å –≤ Vercel:
```bash
vercel login
```

3. –î–µ–ø–ª–æ–π:
```bash
vercel
```
   –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ URL –≤–∞—à–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `https://your-project.vercel.app`)
   **–ó–±–µ—Ä–µ–∂—ñ—Ç—å —Ü–µ–π URL - –≤—ñ–Ω –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥–ª—è webhook!**

4. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –≤ Vercel Dashboard:
   - –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ [vercel.com](https://vercel.com) ‚Üí –≤–∞—à –ø—Ä–æ—î–∫—Ç
   - Settings ‚Üí Environment Variables
   - –î–æ–¥–∞–π—Ç–µ `BOT_KEY` –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º –≤–∞—à–æ–≥–æ Telegram Bot Token
   - **–ù–ï –¥–æ–¥–∞–≤–∞–π—Ç–µ `WEBHOOK_URL` –≤ Vercel** - –≤–æ–Ω–∞ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Ç—ñ–ª—å–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —Å–∫—Ä–∏–ø—Ç–∞

#### –í–∞—Ä—ñ–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ GitHub Integration

1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –ø—Ä–æ—î–∫—Ç –Ω–∞ GitHub
2. –ù–∞ [vercel.com](https://vercel.com) ‚Üí Add New Project ‚Üí Import –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
3. Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
4. –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é —Å–∫–æ–ø—ñ—é–π—Ç–µ URL –ø—Ä–æ—î–∫—Ç—É (–±—É–¥–µ –ø–æ–∫–∞–∑–∞–Ω–æ –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é)
5. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –≤ Vercel Dashboard:
   - Settings ‚Üí Environment Variables
   - –î–æ–¥–∞–π—Ç–µ `BOT_KEY` –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º –≤–∞—à–æ–≥–æ Telegram Bot Token

### –ö—Ä–æ–∫ 4: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Webhook

**‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:** –ö–æ–º–∞–Ω–¥—É `npm run set-webhook` –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ **–õ–û–ö–ê–õ–¨–ù–û** –Ω–∞ –≤–∞—à–æ–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ, **–ù–ï –Ω–∞ Vercel**!

#### –î–µ –≤–∑—è—Ç–∏ Webhook URL?

1. –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –Ω–∞ Vercel –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ URL –≤–∞—à–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É
2. URL –±—É–¥–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫: `https://your-project-name.vercel.app`
3. –¶–µ–π URL –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:
   - –í –∫–æ–Ω—Å–æ–ª—ñ –ø—ñ—Å–ª—è –∫–æ–º–∞–Ω–¥–∏ `vercel`
   - –í Vercel Dashboard ‚Üí –≤–∞—à –ø—Ä–æ—î–∫—Ç ‚Üí Settings ‚Üí Domains
   - –í Vercel Dashboard ‚Üí –≤–∞—à –ø—Ä–æ—î–∫—Ç ‚Üí Deployments ‚Üí –æ—Å—Ç–∞–Ω–Ω—ñ–π –¥–µ–ø–ª–æ–π

#### –Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Webhook (–ø–æ–∫—Ä–æ–∫–æ–≤–æ):

**–í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)**

1. –ù–∞ –≤–∞—à–æ–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ (–ª–æ–∫–∞–ª—å–Ω–æ) –≤—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª `.env`:
```env
BOT_KEY=your_telegram_bot_token_here
WEBHOOK_URL=https://your-project-name.vercel.app
```
   –ó–∞–º—ñ–Ω—ñ—Ç—å `your-project-name.vercel.app` –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π URL –∑ Vercel
   **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ú–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ –∑—ñ —Å–ª–µ—à–µ–º –≤ –∫—ñ–Ω—Ü—ñ (`https://...vercel.app/`) –∞–±–æ –±–µ–∑ - —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–ø—Ä–∞–≤–∏—Ç—å

2. –í —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ –Ω–∞ –≤–∞—à–æ–º—É –∫–æ–º–ø'—é—Ç–µ—Ä—ñ –∑–∞–ø—É—Å—Ç—ñ—Ç—å:
```bash
npm run set-webhook
```

3. –Ø–∫—â–æ –≤—Å–µ –¥–æ–±—Ä–µ, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:
```
‚úÖ Webhook —É—Å–ø—ñ—à–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!
```

**–í–∞—Ä—ñ–∞–Ω—Ç 2: –í—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ curl (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)**

–Ø–∫—â–æ –Ω–µ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–∫—Ä–∏–ø—Ç, –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ webhook –≤—Ä—É—á–Ω—É:

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook?url=https://your-project-name.vercel.app/api"
```

–ó–∞–º—ñ–Ω—ñ—Ç—å:
- `<YOUR_BOT_TOKEN>` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- `your-project-name.vercel.app` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω–∏–π URL –∑ Vercel

**–í–∞—Ä—ñ–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä**

–ü—Ä–æ—Å—Ç–æ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook?url=https://your-project-name.vercel.app/api
```

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ webhook

–©–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ webhook:

```bash
curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
```

–ê–±–æ –≤—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
```
https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo
```

–í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–±–∞—á–∏—Ç–∏ `"url": "https://your-project-name.vercel.app/api"` –≤ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.

## üõ† –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏ –±–æ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î polling (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ, —è–∫—â–æ `WEBHOOK_URL` –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ):

```bash
npm run dev
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
bot/
‚îú‚îÄ‚îÄ api/              # API routes –¥–ª—è Vercel
‚îÇ   ‚îú‚îÄ‚îÄ index.ts      # Webhook handler
‚îÇ   ‚îî‚îÄ‚îÄ reg.ts        # API —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ commands/         # –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ conversations/    # –ë–∞–≥–∞—Ç–æ–∫—Ä–æ–∫–æ–≤—ñ –¥—ñ–∞–ª–æ–≥–∏
‚îú‚îÄ‚îÄ handlers/         # –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π
‚îú‚îÄ‚îÄ helpers/          # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ middlewares/      # Middleware
‚îú‚îÄ‚îÄ scripts/          # –£—Ç–∏–ª—ñ—Ç–∏
‚îú‚îÄ‚îÄ types/            # TypeScript —Ç–∏–ø–∏
‚îú‚îÄ‚îÄ bot.ts           # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ index.ts         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ vercel.json      # Vercel –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```

## üîß –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è

- `BOT_KEY` - Telegram Bot Token (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)
- `WEBHOOK_URL` - URL –≤–∞—à–æ–≥–æ Vercel –ø—Ä–æ—î–∫—Ç—É (–¥–ª—è production)
- `NODE_ENV` - `production` –¥–ª—è Vercel (–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

- –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î polling –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏
- –î–ª—è production –Ω–∞ Vercel –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è webhook
- –°–µ—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ø–∞–º'—è—Ç—ñ (–Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ –º—ñ–∂ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏)
- –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—î —Å—Ö–æ–≤–∏—â–µ –¥–ª—è —Å–µ—Å—ñ–π

## üêõ Troubleshooting

### –ë–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `BOT_KEY` –≤ Vercel
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ webhook:
   ```bash
   curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
   ```
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard

### –ü–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ñ webhook

- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `WEBHOOK_URL` –≤–∫–∞–∑—É—î –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π URL
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ URL –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–Ω–µ localhost)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `BOT_KEY`

