# Telegram Bot - Protein Tracker

Telegram –±–æ—Ç –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è —Å–ø–æ–∂–∏–≤–∞–Ω–Ω—è –±—ñ–ª–∫–∞, –Ω–∞–ø–∏—Å–∞–Ω–∏–π –Ω–∞ TypeScript –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Grammy.

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Vercel

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

1. –û–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å –Ω–∞ [Vercel](https://vercel.com)
2. Telegram Bot Token (–æ—Ç—Ä–∏–º–∞–π—Ç–µ –≤—ñ–¥ [@BotFather](https://t.me/BotFather))
3. Node.js 18+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏)

### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
npm install
```

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É:

```env
BOT_KEY=your_telegram_bot_token_here
```

### –ö—Ä–æ–∫ 3: –î–µ–ø–ª–æ–π –Ω–∞ Vercel

#### –í–∞—Ä—ñ–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Vercel CLI

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Vercel CLI:
```bash
npm i -g vercel
```

2. –£–≤—ñ–π–¥—ñ—Ç—å –≤ Vercel:
```bash
vercel login
```

3. –î–µ–ø–ª–æ–π:
```bash
vercel
```

4. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –≤ Vercel Dashboard:
   - –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ Settings ‚Üí Environment Variables
   - –î–æ–¥–∞–π—Ç–µ `BOT_KEY` –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º –≤–∞—à–æ–≥–æ Telegram Bot Token

5. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å webhook:
   - –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –æ—Ç—Ä–∏–º–∞–π—Ç–µ URL –≤–∞—à–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `https://your-project.vercel.app`)
   - –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—É `WEBHOOK_URL` –≤ Vercel –∑ —Ü–∏–º URL
   - –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ (–∑ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–º `WEBHOOK_URL` –≤ `.env`):
   ```bash
   npm run set-webhook
   ```

#### –í–∞—Ä—ñ–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ GitHub Integration

1. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –ø—Ä–æ—î–∫—Ç –Ω–∞ GitHub
2. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–æ Vercel
3. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –≤ Vercel Dashboard:
   - `BOT_KEY` - –≤–∞—à Telegram Bot Token
   - `WEBHOOK_URL` - URL –≤–∞—à–æ–≥–æ Vercel –ø—Ä–æ—î–∫—Ç—É (–±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –¥–µ–ø–ª–æ—é)
4. –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å webhook:
   ```bash
   npm run set-webhook
   ```

### –ö—Ä–æ–∫ 4: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Webhook

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—é –Ω–∞ Vercel, –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å webhook –¥–ª—è –≤–∞—à–æ–≥–æ –±–æ—Ç–∞:

1. –î–æ–¥–∞–π—Ç–µ `WEBHOOK_URL` –≤ `.env`:
```env
BOT_KEY=your_telegram_bot_token_here
WEBHOOK_URL=https://your-project.vercel.app
```

2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç:
```bash
npm run set-webhook
```

–ê–±–æ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ Telegram API:
```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook?url=https://your-project.vercel.app/api"
```

## üõ† –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏ –±–æ—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î polling (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ, —è–∫—â–æ `WEBHOOK_URL` –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ):

```bash
npm run dev
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
bot/
‚îú‚îÄ‚îÄ api/              # API routes –¥–ª—è Vercel
‚îÇ   ‚îú‚îÄ‚îÄ index.ts      # Webhook handler
‚îÇ   ‚îî‚îÄ‚îÄ reg.ts        # API —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ commands/         # –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ conversations/    # –ë–∞–≥–∞—Ç–æ–∫—Ä–æ–∫–æ–≤—ñ –¥—ñ–∞–ª–æ–≥–∏
‚îú‚îÄ‚îÄ handlers/         # –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π
‚îú‚îÄ‚îÄ helpers/          # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ middlewares/      # Middleware
‚îú‚îÄ‚îÄ scripts/          # –£—Ç–∏–ª—ñ—Ç–∏
‚îú‚îÄ‚îÄ types/            # TypeScript —Ç–∏–ø–∏
‚îú‚îÄ‚îÄ bot.ts           # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ index.ts         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É —Ç–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ vercel.json      # Vercel –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```

## üîß –ó–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è

- `BOT_KEY` - Telegram Bot Token (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)
- `WEBHOOK_URL` - URL –≤–∞—à–æ–≥–æ Vercel –ø—Ä–æ—î–∫—Ç—É (–¥–ª—è production)
- `NODE_ENV` - `production` –¥–ª—è Vercel (–≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

- –ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î polling –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏
- –î–ª—è production –Ω–∞ Vercel –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è webhook
- –°–µ—Å—ñ—ó –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ø–∞–º'—è—Ç—ñ (–Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ –º—ñ–∂ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏)
- –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–æ–≤–Ω—ñ—à–Ω—î —Å—Ö–æ–≤–∏—â–µ –¥–ª—è —Å–µ—Å—ñ–π

## üêõ Troubleshooting

### –ë–æ—Ç –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –ø—ñ—Å–ª—è –¥–µ–ø–ª–æ—é

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `BOT_KEY` –≤ Vercel
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ webhook:
   ```bash
   curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
   ```
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ Vercel Dashboard

### –ü–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ñ webhook

- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `WEBHOOK_URL` –≤–∫–∞–∑—É—î –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π URL
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ URL –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É (–Ω–µ localhost)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `BOT_KEY`

